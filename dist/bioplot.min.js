function translate(a,b){return"translate("+a+","+b+")"}function rotate(a){return"rotate("+a+")"}function transform(a,b,c){return translate(a,b)+rotate(c)}!function(a){a.histogram=function(a){function b(g,h){var i,j,k,l,m=d3.extent(h,function(a){return a.x});m[1]=m[1]+h[0].dx,e.domain(m).range([0,a.size.width-20]),d.domain(m).range(a.colors).interpolate(d3.interpolateHcl),f.domain([0,d3.max(h,function(a){return a.y})]).range([a.size.height-20,20]),i=d3.select(g).classed("ui-bioplot-histogram",!0).selectAll("svg").data([1]),j=i.enter().append("svg").append("g").attr("transform",translate(20,20)),i.attr("width",a.size.width+20).attr("height",a.size.height+20),j.append("g").attr("class","bins"),c.clear().x(e).on("brush",b.selected(h)),j.append("g").attr("class","brush"),i.select(".brush").call(c).selectAll("rect").attr("height",a.size.height-20),l=d3.svg.axis().scale(e).orient("bottom"),j.append("g").attr("class","axis"),i.select(".axis").attr("transform",translate(0,a.size.height-20)).call(l),h.length&&(k=i.select(".bins").selectAll("rect").data(h),k.enter().append("rect"),k.transition().attr("x",function(a){return e(a.x)}).attr("y",function(a){return f(a.y)}).attr("fill",function(a){return d(a.x)}).attr("width",function(a){return e(a.x+a.dx)-e(a.x)}).attr("height",function(a){return f.range()[0]-f(a.y)}),k.exit().remove())}var c=d3.svg.brush(),d=d3.scale.linear(),e=d3.scale.linear(),f=d3.scale.linear(),g=d3.dispatch("selected");return b.bin=function(b,c){var d=d3.layout.histogram();return e=d3.scale.linear().range([0,a.size.width-20]),c&&"function"==typeof c?(e.domain(d3.extent(b,c)),d.value(c)):e.domain(d3.extent(b)),d.bins(e.ticks(a.bins))(b)},b.configure=function(b){a=b||{},a.size=a.size||{width:700,height:700},a.colors=a.colors||["green","red","blue"],a.bins=a.bins||50},b.setBins=function(b){a.bins=b},b.setColors=function(b){a.colors=b},b.setSize=function(b,c){a.size.width=b,a.size.height=c},b.color=function(){return d},b.brush=function(){return c},b.config=function(){return a},b.selected=function(a){return function(){var b=c.extent(),d=a.filter(function(a){return a.x<=b[1]&&a.x>=b[0]});g.selected([].concat.apply([],d))}},d3.rebind(b,g,"on"),b.configure(a),b}}(window.bioplot||(window.bioplot={}));