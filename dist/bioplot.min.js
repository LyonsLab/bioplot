function translate(a,b){return"translate("+a+","+b+")"}function rotate(a){return"rotate("+a+")"}function transform(a,b,c){return translate(a,b)+rotate(c)}!function(a){a.histogram=function(a){function b(g,h){var i,j,k,l,m=d3.extent(h,function(a){return a.x});m[1]=m[1]+h[0].dx,e.domain(m).range([0,a.size.width-20]),d.domain(m).range(a.colors).interpolate(d3.interpolateHcl),f.domain([0,d3.max(h,function(a){return a.y})]).range([a.size.height-20,20]),i=d3.select(g).classed("ui-bioplot-histogram",!0).selectAll("svg").data([1]),j=i.enter().append("svg").append("g").attr("transform",translate(20,20)),i.attr("width",a.size.width+20).attr("height",a.size.height+20),j.append("g").attr("class","bins"),c.clear().x(e).on("brush",b.selected(h)),j.append("g").attr("class","brush"),i.select(".brush").call(c).selectAll("rect").attr("height",a.size.height-20),l=d3.svg.axis().scale(e).orient("bottom"),j.append("g").attr("class","axis"),i.select(".axis").attr("transform",translate(0,a.size.height-20)).call(l),h.length&&(k=i.select(".bins").selectAll("rect").data(h),k.enter().append("rect"),k.transition().attr("x",function(a){return e(a.x)}).attr("y",function(a){return f(a.y)}).attr("fill",function(a){return d(a.x)}).attr("width",function(a){return e(a.x+a.dx)-e(a.x)}).attr("height",function(a){return f.range()[0]-f(a.y)}),k.exit().remove())}var c=d3.svg.brush(),d=d3.scale.linear(),e=d3.scale.linear(),f=d3.scale.linear(),g=d3.dispatch("selected");return b.bin=function(b,c){var d=d3.layout.histogram();return e=d3.scale.linear().range([0,a.size.width-20]),c&&"function"==typeof c?(e.domain(d3.extent(b,c)),d.value(c)):e.domain(d3.extent(b)),d.bins(e.ticks(a.bins))(b)},b.configure=function(b){a=b||{},a.size=a.size||{width:700,height:700},a.colors=a.colors||["green","red","blue"],a.bins=a.bins||50},b.setBins=function(b){a.bins=b},b.setColors=function(b){a.colors=b},b.setSize=function(b,c){a.size.width=b,a.size.height=c},b.color=function(){return d},b.brush=function(){return c},b.config=function(){return a},b.selected=function(a){return function(){var b=c.extent(),d=a.filter(function(a){return a.x<=b[1]&&a.x>=b[0]});g.selected([].concat.apply([],d))}},d3.rebind(b,g,"on"),b.configure(a),b}}(window.bioplot||(window.bioplot={})),function(a){function b(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d}function c(a,b){this.capacity=10,this.level=b||10,this.boundary=a,this.points=[]}b.prototype=function(){return{contains:function(a){return"line"===a.dataType?this._containsLine(a):"point"===a.dataType?this._containsPoint(a):a.x>=this.x&&a.y>=this.y&&a.x+a.width<=this.x+this.width&&a.y+a.height<=this.y+this.height},_containsLine:function(a){return this._containsPoint({x:a.x1,y:a.y1})&&this._containsPoint({x:a.x2,y:a.y2})},_containsPoint:function(a){return a.x>=this.x&&a.y>=this.y&&a.x<=this.x+this.width&&a.y<=this.y+this.height},toString:function(){return"[x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+"]"},intersects:function(a){return"line"===a.dataType?this._intersectsLine(a):"point"===a.dataType?this._containsPoint(a):!(a.left>this.left+this.width||a.left+a.width<this.left||a.y>this.y+this.height||a.y+a.height<this.x)},_intersectsLine:function(a){return this._containsPoint({x:a.x1,y:a.y1})||this._containsPoint({x:a.x2,y:a.y2})}}}(),c.prototype=function(){return{split:function(){var a=parseInt(this.boundary.width/2,10),d=parseInt(this.boundary.height/2,10),e=this.level+1,f=this.boundary.x,g=this.boundary.y,h=f+a,i=g+d;this.northWest=new c(new b(f,i,a,d),e),this.northEast=new c(new b(h,i,a,d),e),this.southEast=new c(new b(h,g,a,d),e),this.southWest=new c(new b(f,g,a,d),e)},clear:function(){void 0!==this.northWest&&this.northWest.clear(),void 0!==this.northEast&&this.northEast.clear(),void 0!==this.southWest&&this.southWest.clear(),void 0!==this.southEast&&this.southEast.clear(),this.northWest=void 0,this.northEast=void 0,this.southWest=void 0,this.southEast=void 0,this.points.length=0},insert:function(a){return this.boundary.contains(a)?this.points.length<this.capacity?(this.points.push(a),!0):(void 0===this.northWest&&this.split(),this.northWest.insert(a)?!0:this.northEast.insert(a)?!0:this.southWest.insert(a)?!0:this.southEast.insert(a)?!0:(this.points.push(a),!0)):!1},query:function(a){var b=[];return this.boundary.intersects(a)?(this.points.forEach(function(c){a.intersects(c)&&b.push(c)}),void 0===this.northWest?b:(b=b.concat(this.northWest.query(a)),b=b.concat(this.northEast.query(a)),b=b.concat(this.southWest.query(a)),b=b.concat(this.southEast.query(a)))):b}}}(),a.Rectangle=b,a.Quadtree=c}(window.bioplot||(window.bioplot={}));